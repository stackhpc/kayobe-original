{% if item.peer_bootproto == 'static' %}
auto {{ item.peer_device }}
iface {{ item.peer_device }} inet static
{% if item.peer_mtu is defined %}
mtu {{ item.peer_mtu }}
{% endif %}
{% if item.peer_address is defined %}
address {{ item.peer_address }}
{% endif %}
{% if item.peer_netmask is defined %}
netmask {{ item.peer_netmask }}
{% endif %}
{% if item.peer_gateway is defined %}
gateway {{ item.peer_gateway }}
{% endif %}
{% endif %}

{% if item.peer_bootproto == 'dhcp' %}
auto {{ item.peer_device }}
iface {{ item.peer_device }} inet dhcp
{% endif %}

pre-up ip link show dev {{ item.device }} >/dev/null 2>&1 || ip link add dev {{ item.device }} type veth peer name {{ item.peer_device }}
